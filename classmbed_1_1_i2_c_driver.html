<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GT RoboCup SSL: mbed::I2CDriver Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rj_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GT RoboCup SSL
   </div>
   <div id="projectbrief">Soccer software, robot firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classmbed_1_1_i2_c_driver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pro-static-attribs">Static Protected Attributes</a> &#124;
<a href="classmbed_1_1_i2_c_driver-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">mbed::I2CDriver Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>I2C driver based on mbed RTOS and I2C-C-API.  
 <a href="classmbed_1_1_i2_c_driver.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for mbed::I2CDriver:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="classmbed_1_1_i2_c_driver__coll__graph.png" border="0" usemap="#mbed_1_1_i2_c_driver_coll__map" alt="Collaboration graph"/></div>
<map name="mbed_1_1_i2_c_driver_coll__map" id="mbed_1_1_i2_c_driver_coll__map">
<area shape="rect" id="node2" href="structmbed_1_1_i2_c_driver_1_1_channel.html" title="mbed::I2CDriver::Channel" alt="" coords="5,5,191,32"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmbed_1_1_i2_c_driver_1_1_channel.html">Channel</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2005bc05c57dde5248a2a494f8b4e00f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2005bc05c57dde5248a2a494f8b4e00f"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a2005bc05c57dde5248a2a494f8b4e00f">SlaveRxStatus</a> { <b>NoData</b> = 0, 
<b>ReadAddressed</b> = 1, 
<b>WriteGeneral</b> = 2, 
<b>WriteAddressed</b> = 3
 }<tr class="memdesc:a2005bc05c57dde5248a2a494f8b4e00f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status returned by the receiveSlave() function. <br /></td></tr>
</td></tr>
<tr class="separator:a2005bc05c57dde5248a2a494f8b4e00f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab1003b9c2954e40e601eff790d27ca75"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#ab1003b9c2954e40e601eff790d27ca75">I2CDriver</a> (PinName sda, PinName scl, int hz=100000, int slaveAdr=0)</td></tr>
<tr class="memdesc:ab1003b9c2954e40e601eff790d27ca75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an I2C Master interface, connected to the specified pins.  <a href="#ab1003b9c2954e40e601eff790d27ca75">More...</a><br /></td></tr>
<tr class="separator:ab1003b9c2954e40e601eff790d27ca75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6ac64e32fb10ce302e44b8bd4a588e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#aa6ac64e32fb10ce302e44b8bd4a588e9">frequency</a> (int hz)</td></tr>
<tr class="memdesc:aa6ac64e32fb10ce302e44b8bd4a588e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the frequency of the I2C interface.  <a href="#aa6ac64e32fb10ce302e44b8bd4a588e9">More...</a><br /></td></tr>
<tr class="separator:aa6ac64e32fb10ce302e44b8bd4a588e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03d9f785555bb3909510290ca73cb74a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a03d9f785555bb3909510290ca73cb74a">readMaster</a> (int address, char *data, int length, bool repeated=false)</td></tr>
<tr class="memdesc:a03d9f785555bb3909510290ca73cb74a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an I2C slave.  <a href="#a03d9f785555bb3909510290ca73cb74a">More...</a><br /></td></tr>
<tr class="separator:a03d9f785555bb3909510290ca73cb74a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84bb2e0362d2b4b8a687b2454153888f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a84bb2e0362d2b4b8a687b2454153888f">readMaster</a> (int address, uint8_t _register, char *data, int length, bool repeated=false)</td></tr>
<tr class="memdesc:a84bb2e0362d2b4b8a687b2454153888f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from a given I2C slave register.  <a href="#a84bb2e0362d2b4b8a687b2454153888f">More...</a><br /></td></tr>
<tr class="separator:a84bb2e0362d2b4b8a687b2454153888f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0878423ab9ef6cd64edc0e551e0f0c98"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a0878423ab9ef6cd64edc0e551e0f0c98">readMaster</a> (int ack=1)</td></tr>
<tr class="memdesc:a0878423ab9ef6cd64edc0e551e0f0c98"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single byte from the I2C bus.  <a href="#a0878423ab9ef6cd64edc0e551e0f0c98">More...</a><br /></td></tr>
<tr class="separator:a0878423ab9ef6cd64edc0e551e0f0c98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd51e043b788fa3352b86595b346d71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#acdd51e043b788fa3352b86595b346d71">writeMaster</a> (int address, const char *data, int length, bool repeated=false)</td></tr>
<tr class="memdesc:acdd51e043b788fa3352b86595b346d71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to an I2C slave.  <a href="#acdd51e043b788fa3352b86595b346d71">More...</a><br /></td></tr>
<tr class="separator:acdd51e043b788fa3352b86595b346d71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbe58aea77dff35781d5ca1bda4b0de3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#adbe58aea77dff35781d5ca1bda4b0de3">writeMaster</a> (int data)</td></tr>
<tr class="memdesc:adbe58aea77dff35781d5ca1bda4b0de3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write single byte out on the I2C bus.  <a href="#adbe58aea77dff35781d5ca1bda4b0de3">More...</a><br /></td></tr>
<tr class="separator:adbe58aea77dff35781d5ca1bda4b0de3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2711321ef746b170b5dfb408c4e01be"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#ab2711321ef746b170b5dfb408c4e01be">addressSlave</a> (int address)</td></tr>
<tr class="memdesc:ab2711321ef746b170b5dfb408c4e01be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the I2C slave address.  <a href="#ab2711321ef746b170b5dfb408c4e01be">More...</a><br /></td></tr>
<tr class="separator:ab2711321ef746b170b5dfb408c4e01be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3de96755baaf4fd0ca1115ded49d5279"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a3de96755baaf4fd0ca1115ded49d5279">receiveSlave</a> (uint32_t timeout_ms=osWaitForever)</td></tr>
<tr class="memdesc:a3de96755baaf4fd0ca1115ded49d5279"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks to see if this I2C Slave has been addressed.  <a href="#a3de96755baaf4fd0ca1115ded49d5279">More...</a><br /></td></tr>
<tr class="separator:a3de96755baaf4fd0ca1115ded49d5279"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3950f5d02a4a27c48d215cdc218e958e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a3950f5d02a4a27c48d215cdc218e958e">readSlave</a> (char *data, int length)</td></tr>
<tr class="memdesc:a3950f5d02a4a27c48d215cdc218e958e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read from an I2C master.  <a href="#a3950f5d02a4a27c48d215cdc218e958e">More...</a><br /></td></tr>
<tr class="separator:a3950f5d02a4a27c48d215cdc218e958e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5c34bc61dacc1d64312f431c182fa2"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#acc5c34bc61dacc1d64312f431c182fa2">readSlave</a> ()</td></tr>
<tr class="memdesc:acc5c34bc61dacc1d64312f431c182fa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read a single byte from an I2C master.  <a href="#acc5c34bc61dacc1d64312f431c182fa2">More...</a><br /></td></tr>
<tr class="separator:acc5c34bc61dacc1d64312f431c182fa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b69b9bef095f7d99c2a1987c0c16998"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a9b69b9bef095f7d99c2a1987c0c16998">writeSlave</a> (const char *data, int length)</td></tr>
<tr class="memdesc:a9b69b9bef095f7d99c2a1987c0c16998"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write to an I2C master.  <a href="#a9b69b9bef095f7d99c2a1987c0c16998">More...</a><br /></td></tr>
<tr class="separator:a9b69b9bef095f7d99c2a1987c0c16998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c60f25719bf4150e1e1129dd3ad140"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#ad9c60f25719bf4150e1e1129dd3ad140">writeSlave</a> (int data)</td></tr>
<tr class="memdesc:ad9c60f25719bf4150e1e1129dd3ad140"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a single byte to an I2C master.  <a href="#ad9c60f25719bf4150e1e1129dd3ad140">More...</a><br /></td></tr>
<tr class="separator:ad9c60f25719bf4150e1e1129dd3ad140"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ebb2df84e62811bc0d297813d66ea91"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6ebb2df84e62811bc0d297813d66ea91"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a6ebb2df84e62811bc0d297813d66ea91">startMaster</a> ()</td></tr>
<tr class="memdesc:a6ebb2df84e62811bc0d297813d66ea91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a start condition on the I2C bus. <br /></td></tr>
<tr class="separator:a6ebb2df84e62811bc0d297813d66ea91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a605b4c6d27a2339b5ff055f89958c018"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a605b4c6d27a2339b5ff055f89958c018"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a605b4c6d27a2339b5ff055f89958c018">stopSlave</a> ()</td></tr>
<tr class="memdesc:a605b4c6d27a2339b5ff055f89958c018"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a stop condition on the I2C bus. <br /></td></tr>
<tr class="separator:a605b4c6d27a2339b5ff055f89958c018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a057006a54ef33be39e4a638f2cfeba76"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a057006a54ef33be39e4a638f2cfeba76">stopMaster</a> ()</td></tr>
<tr class="memdesc:a057006a54ef33be39e4a638f2cfeba76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a stop condition on the I2C bus If unsccessful because someone on the bus holds the scl line down it returns "false" after 23µs In normal operation the stop shouldn't take longer than 12µs @ 100kHz and 3-4µs @ 400kHz.  <a href="#a057006a54ef33be39e4a638f2cfeba76">More...</a><br /></td></tr>
<tr class="separator:a057006a54ef33be39e4a638f2cfeba76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164d275e113843b3d21b2e74d3183386"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a164d275e113843b3d21b2e74d3183386">lock</a> ()</td></tr>
<tr class="memdesc:a164d275e113843b3d21b2e74d3183386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until the i2c driver becomes available.  <a href="#a164d275e113843b3d21b2e74d3183386">More...</a><br /></td></tr>
<tr class="separator:a164d275e113843b3d21b2e74d3183386"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa118c20ca912a4ee74a5768c4a444336"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa118c20ca912a4ee74a5768c4a444336"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#aa118c20ca912a4ee74a5768c4a444336">unlock</a> ()</td></tr>
<tr class="memdesc:aa118c20ca912a4ee74a5768c4a444336"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the driver that has previously been locked by the same thread. <br /></td></tr>
<tr class="separator:aa118c20ca912a4ee74a5768c4a444336"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a13cbdb225ae35aab94853c237e1a1192"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a13cbdb225ae35aab94853c237e1a1192"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>config</b> ()</td></tr>
<tr class="separator:a13cbdb225ae35aab94853c237e1a1192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcd89e364d820fbe87a1d496f699c27"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6dcd89e364d820fbe87a1d496f699c27"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>lockNconfig</b> ()</td></tr>
<tr class="separator:a6dcd89e364d820fbe87a1d496f699c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a6e33e4e9cb95b9a06650f5dbbdf86e1f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6e33e4e9cb95b9a06650f5dbbdf86e1f"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>m_freq</b></td></tr>
<tr class="separator:a6e33e4e9cb95b9a06650f5dbbdf86e1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295a8ac4bd9e60c9e51d6065e8d7d399"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a295a8ac4bd9e60c9e51d6065e8d7d399"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>m_slaveAdr</b></td></tr>
<tr class="separator:a295a8ac4bd9e60c9e51d6065e8d7d399"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01a34ebf1667ac2017c9d0dc8e80d3e1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a01a34ebf1667ac2017c9d0dc8e80d3e1"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>m_modeSlave</b></td></tr>
<tr class="separator:a01a34ebf1667ac2017c9d0dc8e80d3e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6edb3a7172d31210d3a71e2b00b1299e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6edb3a7172d31210d3a71e2b00b1299e"></a>
<a class="el" href="structmbed_1_1_i2_c_driver_1_1_channel.html">Channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classmbed_1_1_i2_c_driver.html#a6edb3a7172d31210d3a71e2b00b1299e">m_channel</a></td></tr>
<tr class="memdesc:a6edb3a7172d31210d3a71e2b00b1299e"><td class="mdescLeft">&#160;</td><td class="mdescRight">to one of the entries in s_channels <br /></td></tr>
<tr class="separator:a6edb3a7172d31210d3a71e2b00b1299e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-static-attribs"></a>
Static Protected Attributes</h2></td></tr>
<tr class="memitem:a3cb3d04b0637b8cc4d4e688b96610f5b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3cb3d04b0637b8cc4d4e688b96610f5b"></a>
static const osPriority&#160;</td><td class="memItemRight" valign="bottom"><b>c_drvPrio</b> = osPriorityRealtime</td></tr>
<tr class="separator:a3cb3d04b0637b8cc4d4e688b96610f5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af68caf047974b72af3f3f5a607ff6cd1"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af68caf047974b72af3f3f5a607ff6cd1"></a>
static const PinName&#160;</td><td class="memItemRight" valign="bottom"><b>c_sdas</b> [2] = {p9, p28}</td></tr>
<tr class="separator:af68caf047974b72af3f3f5a607ff6cd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2b58a75efe8dfa0fb2ff9208aa0d34b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae2b58a75efe8dfa0fb2ff9208aa0d34b"></a>
static const PinName&#160;</td><td class="memItemRight" valign="bottom"><b>c_scls</b> [2] = {p10, p27}</td></tr>
<tr class="separator:ae2b58a75efe8dfa0fb2ff9208aa0d34b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51a84cb6b34c102002708c0eefd6dbf8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a51a84cb6b34c102002708c0eefd6dbf8"></a>
static <a class="el" href="structmbed_1_1_i2_c_driver_1_1_channel.html">Channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>s_channels</b> [2] = {0, 0}</td></tr>
<tr class="separator:a51a84cb6b34c102002708c0eefd6dbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I2C driver based on mbed RTOS and I2C-C-API. </p>
<p>Supports Master and Slave mode </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab1003b9c2954e40e601eff790d27ca75"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">I2CDriver::I2CDriver </td>
          <td>(</td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>sda</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PinName&#160;</td>
          <td class="paramname"><em>scl</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hz</em> = <code>100000</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slaveAdr</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create an I2C Master interface, connected to the specified pins. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sda</td><td>I2C data line pin </td></tr>
    <tr><td class="paramname">scl</td><td>I2C clock line pin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Has to be created in a thread context, i.e. within the main or some other function. A global delaration does not work </dd></dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab2711321ef746b170b5dfb408c4e01be"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mbed::I2CDriver::addressSlave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sets the I2C slave address. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The address to set for the slave (ignoring the least signifcant bit). If set to 0, the slave will only respond to the general call address. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa6ac64e32fb10ce302e44b8bd4a588e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void mbed::I2CDriver::frequency </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>hz</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the frequency of the I2C interface. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hz</td><td>The bus frequency in hertz </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a164d275e113843b3d21b2e74d3183386"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2CDriver::lock </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wait until the i2c driver becomes available. </p>
<p>Useful if you want to run a sequence of command without interrution by another thread. There's no need to call this function for running single request, because all driver functions will lock the device for exclusive access automatically. </p>

</div>
</div>
<a class="anchor" id="a03d9f785555bb3909510290ca73cb74a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::readMaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>repeated</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an I2C slave. </p>
<p>Performs a complete read transaction. The bottom bit of the address is forced to 1 to indicate a read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>8-bit I2C slave address [ addr | 1 ] </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the byte-array to read data in to </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to read </td></tr>
    <tr><td class="paramname">repeated</td><td>Repeated start, true - don't send stop at end</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (ack), non-0 on failure (nack) </dd></dl>

</div>
</div>
<a class="anchor" id="a84bb2e0362d2b4b8a687b2454153888f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::readMaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>_register</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>repeated</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from a given I2C slave register. </p>
<p>Performs a complete write-register-read-data-transaction. The bottom bit of the address is forced to 1 to indicate a read.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>8-bit I2C slave address [ addr | 1 ] </td></tr>
    <tr><td class="paramname">_register</td><td>8-bit regster address </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the byte-array to read data in to </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to read </td></tr>
    <tr><td class="paramname">repeated</td><td>Repeated start, true - don't send stop at end</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (ack), non-0 on failure (nack) </dd></dl>

</div>
</div>
<a class="anchor" id="a0878423ab9ef6cd64edc0e551e0f0c98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::readMaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ack</em> = <code>1</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single byte from the I2C bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ack</td><td>indicates if the byte is to be acknowledged (1 = acknowledge)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the byte read </dd></dl>

</div>
</div>
<a class="anchor" id="a3950f5d02a4a27c48d215cdc218e958e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::readSlave </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read from an I2C master. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>pointer to the byte array to read data in to </td></tr>
    <tr><td class="paramname">length</td><td>maximum number of bytes to read</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-0 otherwise ... no! instead it returns number of bytes read minus one ... weird, guess its a bug in the official lib </dd></dl>

</div>
</div>
<a class="anchor" id="acc5c34bc61dacc1d64312f431c182fa2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::readSlave </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read a single byte from an I2C master. </p>
<dl class="section return"><dt>Returns</dt><dd>the byte read </dd></dl>

</div>
</div>
<a class="anchor" id="a3de96755baaf4fd0ca1115ded49d5279"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::receiveSlave </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout_ms</em> = <code>osWaitForever</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks to see if this I2C Slave has been addressed. </p>
<dl class="section return"><dt>Returns</dt><dd>A status indicating if the device has been addressed, and how<ul>
<li>NoData - the slave has not been addressed</li>
<li>ReadAddressed - the master has requested a read from this slave</li>
<li>WriteAddressed - the master is writing to this slave</li>
<li>WriteGeneral - the master is writing to all slave </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a057006a54ef33be39e4a638f2cfeba76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool I2CDriver::stopMaster </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a stop condition on the I2C bus If unsccessful because someone on the bus holds the scl line down it returns "false" after 23µs In normal operation the stop shouldn't take longer than 12µs @ 100kHz and 3-4µs @ 400kHz. </p>

</div>
</div>
<a class="anchor" id="acdd51e043b788fa3352b86595b346d71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::writeMaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>repeated</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to an I2C slave. </p>
<p>Performs a complete write transaction. The bottom bit of the address is forced to 0 to indicate a write.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>8-bit I2C slave address [ addr | 0 ] </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to the byte-array data to send </td></tr>
    <tr><td class="paramname">length</td><td>Number of bytes to send </td></tr>
    <tr><td class="paramname">repeated</td><td>Repeated start, true - do not send stop at end</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success (ack), non-0 on failure (nack) </dd></dl>

</div>
</div>
<a class="anchor" id="adbe58aea77dff35781d5ca1bda4b0de3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::writeMaster </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write single byte out on the I2C bus. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>data to write out on bus</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>'1' if an ACK was received, '0' otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="a9b69b9bef095f7d99c2a1987c0c16998"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::writeSlave </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write to an I2C master. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>pointer to the byte array to be transmitted </td></tr>
    <tr><td class="paramname">length</td><td>the number of bytes to transmite</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-0 otherwise </dd></dl>

</div>
</div>
<a class="anchor" id="ad9c60f25719bf4150e1e1129dd3ad140"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int I2CDriver::writeSlave </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a single byte to an I2C master. </p>
<p>the byte to write</p>
<dl class="section return"><dt>Returns</dt><dd>'1' if an ACK was received, '0' otherwise </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>firmware/common2015/drivers/rtos-i2c/<a class="el" href="_i2_c_driver_8hpp_source.html">I2CDriver.hpp</a></li>
<li>firmware/common2015/drivers/rtos-i2c/I2CDriver.cpp</li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><b>mbed</b></li><li class="navelem"><a class="el" href="classmbed_1_1_i2_c_driver.html">I2CDriver</a></li>
    <li class="footer">Generated on Wed Apr 19 2017 00:50:16 for GT RoboCup SSL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
