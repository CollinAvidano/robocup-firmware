<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>GT RoboCup SSL: Robot Firmware 2008, 2011</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rj_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GT RoboCup SSL
   </div>
   <div id="projectbrief">Soccer software, robot firmware</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_doc_RobotFirmware.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Robot Firmware 2008, 2011 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Robot firmware is anything that runs on the robot itself, rather than on the field computer. It is composed of two main parts: VeriLog HDL code for the FPGA and C code that runs on the microprocessor. The microprocessor handles most of the logic that drives the robots and the FPGA is the bridge that the microprocessor uses to communicate with the hardware.</p>
<p>Both the 2008 and 2011 robot revisions run the same firmware. A DIP switch on the control board is set to tell the firmware what revision it is running on so that it can handle the hardware differences at runtime.</p>
<p>The firmware for the new 2015 revision will run a new codebase that is documented separately.</p>
<h2>Startup</h2>
<p>The firmware starts out by first initializing certain hardware components, such as setting up I/O pins, starting the system clock, etc.</p>
<p>It then plays the startup sounds to let us know that the board initialized without error. There are also special sounds for dead battery and startup failure.</p>
<p>In many places you'll notice 'variables' being used that begin with 'AT91C_BASE_PIOA', which gives access to the I/O pins.</p>
<h2>Hardware</h2>
<p>The firmware's job is to accept instructions over the radio and carry them out by controlling the hardware. Here's a list of the hardware onboard:</p>
<ul>
<li>IMU</li>
<li>Motor drivers - one for each wheel and one for the dribbler</li>
<li>encoders</li>
<li><a href="http://en.wikipedia.org/wiki/Hall_effect_sensor">hall sensors</a> (one per motor)</li>
<li>kicker</li>
<li>battery voltage meter (reading from an <a href="http://en.wikipedia.org/wiki/Analog-to-digital_converter">adc</a>)</li>
<li>radio (see protocol information <a href="https://github.com/RoboJackets/robocup-software/blob/master/doc/radio-protocol-2011.txt">here</a>)</li>
<li>USB</li>
<li>LEDs</li>
<li>Sounds / songs</li>
<li>ball sensor</li>
<li>Robot ID selector</li>
</ul>
<h2>Console</h2>
<p>A great way to debug a robot or just to query it for information is to use the console. This is a command-prompt that you can use when the robot is connected via USB. We have <a href="http://en.wikipedia.org/wiki/Udev">udev</a> rules setup so that when the robot is connected via USB, it will show up in the filesystem as <code>/dev/robot</code>. You can use the <a href="http://en.wikipedia.org/wiki/GNU_Screen">screen</a> program in the terminal to connect to it by typing:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;sudo screen /dev/robot</div></div><!-- fragment --><p>From there you can type any of the many available commands to make the robot do things or get info. Type <code>help</code> to see a list of available commands. As of writing this document, the list is:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;help</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;status</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;reflash</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;reset</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;stfu</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;run</div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;inputs</div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;timers</div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;fpga_reset</div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;fpga_off</div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;fpga_on</div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;fpga_test</div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;spi_test</div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;spi_erase</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;spi_write</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;spi_read</div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;radio_configure</div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;radio_start</div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;music</div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;tone</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;fail</div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;adc</div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;i2c_read</div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;i2c_write</div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;monitor_faults</div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;monitor_halls</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;read</div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;rx_test</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;kicker_test</div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;drive_mode</div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;monitor_charge</div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;imu_test</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;monitor_ball</div></div><!-- fragment --><h2>Sounds</h2>
<p>The firmware plays certain sounds at startup or during operation to indicate status:</p>
<ul>
<li><a href="0-startup.m4a">0-startup</a></li>
<li><a href="1-failure.m4a">1-failure</a></li>
<li><a href="2-overvoltage.m4a">2-overvoltage</a></li>
<li><a href="3-undervoltage.m4a">3-undervoltage</a></li>
<li><a href="4-fuse-blown.m4a">4-fuse-blown</a></li>
<li><a href="5-victory.m4a">5-fight-song</a></li>
<li><a href="6-still-alive.ogg">6-still-alive</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Sep 12 2016 03:10:47 for GT RoboCup SSL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
